<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!--    /**-->
    <!--    * Created By Praneeth On 08/07/2019 for numberblock v1.0-->
    <!--    */-->
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Bit Coin Lottery</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- Bootstrap -->
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Popper -->
    <script crossorigin="anonymous"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <!-- Bootstrap -->
    <script crossorigin="anonymous"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        var randomCount = 0;
        var stakeCount = 0;
        var selectedArr = [];
        var numBlockMap = new Map();
        var randomMap = new Map();
        var randomDataMap = new Map();
        var stakeMap = new Map();
        var stakeDefault = 0.00;
        const STAKEAMT = 3.50;

        function clickFunction(cardId, id, button) {
            var btnVal = $(button).text();
            selectedArr = [];
            var selectedNumArr = [];
            selectedArr.push(id);
            var msg = "";

            for (var i = 1; i <= 56; i++) {
                if ($('#' + cardId).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                    selectedNumArr.push(parseInt(i <= 9 ? "0" + i : i));
                }
            }

            if (selectedNumArr.includes(parseInt(id))) {
                var index = selectedNumArr.indexOf(parseInt(id));
                if (index > -1) {
                    selectedNumArr.splice(index, 1);
                }
            }

            switch (selectedNumArr.length) {
                case 0 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 6/6 Numbers.";
                    } else {
                        msg = "Remaining 5/6 Numbers.";
                    }
                    break;
                case 1 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 5/6 Numbers.";
                    } else {
                        msg = "Remaining 4/6 Numbers.";
                    }
                    break;
                case 2 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 4/6 Numbers.";
                    } else {
                        msg = "Remaining 3/6 Numbers.";
                    }
                    break;
                case 3 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 3/6 Numbers.";
                    } else {
                        msg = "Remaining 2/6 Numbers.";
                    }
                    break;
                case 4 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 2/6 Numbers.";
                    } else {
                        msg = "Remaining 1/6 Numbers.";
                    }
                    break;
                case 5 :
                    if (btnVal.trim().length === 0) {
                        msg = "Remaining 1/6 Numbers.";
                    } else {
                        msg = "Remaining 0/6 Numbers.";
                    }
                    break;
                case 6 :
                    msg = "Remaining 0/6 Numbers.";
                    break;
            }

            $('#' + "remainNumCount" + cardId + " " + "span").text(msg);

            if (selectedNumArr.length === 6) {
                $(button).html($('<span>' + id + '</span>'));
                $('#limitDialog').modal('show');
            } else {
                if (numBlockMap.get(cardId) === undefined) {
                    numBlockMap.set(cardId, selectedArr);
                    $(button).find('span').remove();
                    if (id === btnVal.trim()) {
                        $(button).html($('<i/>', {class: 'fa fa-times fa-lg'}));
                        var currentDraw = "Current Draw : <span class='numberCircle'>" + id + "</span>" + '-';

                        $('#currentDraw').empty();
                        $('#currentDraw').append(currentDraw);
                    } else {
                        $(button).html($('<span>' + id + '</span>'));
                    }
                } else {
                    var currentArr = numBlockMap.get(cardId);

                    $(button).find('span').remove();
                    if (id === btnVal.trim()) {
                        if (currentArr.length >= 6) {
                            $(button).html($('<span>' + id + '</span>'));
                            $('#limitDialog').modal('show');
                        } else {
                            $(button).html($('<i/>', {class: 'fa fa-times fa-lg'}));
                            currentArr.push(id);
                            numBlockMap.set(cardId, currentArr);

                            if (currentArr.length === 6) {
                                var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                                var stakeTotal = parseFloat(stakeVal) + parseFloat("3.50");
                                $('#stake').text(stakeTotal.toFixed(2));
                            }

                            var currentDraw = "Current Draw : ";
                            for (var k = 0; k < currentArr.length; k++) {
                                currentDraw += "<span class='numberCircle'>" + (currentArr[k]) + "</span>" + ((k !== 5) ? '-' : '');
                            }
                            $('#currentDraw').empty();
                            $('#currentDraw').append(currentDraw);
                        }
                    } else {
                        $(button).html($('<span>' + id + '</span>'));
                        var currentArr = numBlockMap.get(cardId);
                        currentArr.splice(currentArr.indexOf(id), 1);
                        numBlockMap.set(cardId, currentArr);

                        var currentDraw = "Current Draw : ";
                        for (var k = 0; k < currentArr.length; k++) {
                            currentDraw += "<span class='numberCircle'>" + (currentArr[k]) + "</span>" + ((k !== 5) ? '-' : '');
                        }
                        $('#currentDraw').empty();
                        $('#currentDraw').append(currentDraw);

                        if (currentArr.length === 5) {
                            var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                            var stakeTotal = parseFloat(stakeVal) - parseFloat("3.50");
                            $('#stake').text(stakeTotal.toFixed(2));
                        }
                    }
                }
            }
        }

        function randomClickFunction(cardId, fieldsetId, button) {
            // $('#' + fieldsetId).prop('disabled', true);
            $("body").addClass("loading");
            var randomArr = [];
            var randomNumber;

            while (randomArr.length < 7) {
                randomNumber = getRandomNumber();
                if (randomArr.length === 6) {
                    break;
                } else if (randomArr.length === 0) {
                    if (randomNumber <= 9) {
                        randomArr.push('0' + randomNumber);
                    } else {
                        randomArr.push(randomNumber);
                    }
                } else {
                    if (!randomArr.includes(randomNumber)) {
                        if (randomNumber <= 9) {
                            randomArr.push('0' + randomNumber);
                        } else {
                            randomArr.push(randomNumber);
                        }
                    }
                }
            }

            randomDataMap.set('crd' + cardId, randomArr);

            for (var i = 1; i <= 56; i++) {
                if ($('#' + 'crd' + cardId).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                    $('#' + 'crd' + cardId).find('#' + (i <= 9 ? '0' + i : i)).html($('<span>' + (i <= 9 ? '0' + i : i) + '</span>'));
                }
            }

            for (var i = 0; i < randomArr.length; i++) {
                $('#' + 'crd' + cardId).find('#' + randomArr[i]).html($('<i/>', {class: 'fa fa-times fa-lg'}));
            }

            if (stakeMap.get(cardId) === undefined) {
                var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                var stakeTotal = parseFloat(stakeVal) + parseFloat("3.50");
                stakeMap.set(cardId, stakeCount + 1);
                $('#stake').text(stakeTotal.toFixed(2));
            }

            $('#' + "remainNumCount" + "crd" + cardId + " " + "span").text("Remaining 0/6 Numbers.");
            $("body").removeClass("loading");
        }

        function deterministicClickFunction(crdId, fieldsetId, checkbox) {
            if ($(checkbox).prop("checked") == true) {
                $('#' + fieldsetId).prop('disabled', false);
                $('#' + 'crd' + crdId).find('#' + 'randomBtn' + crdId).prop('disabled', false);
                $('#' + 'crd' + crdId).find('#' + 'deleteBtn' + crdId).prop('disabled', false);
                $('#' + "remainNumCount" + "crd" + crdId).show();

                var selectedRandomArr = [];
                for (var i = 1; i <= 56; i++) {
                    if ($('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                        $('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).html($('<span>' + (i <= 9 ? '0' + i : i) + '</span>'));
                        selectedRandomArr.push(i);
                    }
                }

                if (selectedRandomArr.length === 6) {
                    if (randomMap.get(crdId) === undefined) {
                        var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                        var stakeTotal = parseFloat(stakeVal) - parseFloat("3.50");
                        randomMap.set(crdId, randomCount + 1);
                        $('#stake').text(stakeTotal.toFixed(2));
                    }

                    // reset data
                    numBlockMap.set('crd' + crdId, []);
                    stakeCount = 0;
                    randomCount = 0;
                    stakeMap.set(crdId, undefined);
                    randomMap.set(crdId, undefined);
                }
            } else {
                numBlockMap.set('crd' + crdId, []);
                $('#' + fieldsetId).prop('disabled', true);
                $('#' + 'crd' + crdId).find('#' + 'randomBtn' + crdId).prop('disabled', true);
                $('#' + 'crd' + crdId).find('#' + 'deleteBtn' + crdId).prop('disabled', true);
                $('#' + "remainNumCount" + "crd" + crdId).hide();

                var selectedRandomArr = [];
                for (var i = 1; i <= 56; i++) {
                    if ($('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                        $('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).html($('<span>' + (i <= 9 ? '0' + i : i) + '</span>'));
                        selectedRandomArr.push(i);
                    }
                }

                if (selectedRandomArr.length === 6) {
                    if (randomMap.get(crdId) === undefined) {
                        var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                        var stakeTotal = parseFloat(stakeVal) - parseFloat("3.50");
                        randomMap.set(crdId, randomCount + 1);
                        $('#stake').text(stakeTotal.toFixed(2));
                    }

                    // reset data
                    numBlockMap.set('crd' + crdId, []);
                    stakeCount = 0;
                    randomCount = 0;
                    stakeMap.set(crdId, undefined);
                    randomMap.set(crdId, undefined);
                }
            }
        }

        function deleteClickFunction(crdId, fieldsetId) {
            var selectedRandomArr = [];
            for (var i = 1; i <= 56; i++) {
                if ($('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                    $('#' + 'crd' + crdId).find('#' + (i <= 9 ? '0' + i : i)).html($('<span>' + (i <= 9 ? '0' + i : i) + '</span>'));
                    selectedRandomArr.push(i);
                }
            }

            if (selectedRandomArr.length === 6) {
                if (randomMap.get(crdId) === undefined) {
                    var stakeVal = parseFloat($("#stake").text().trim()).toFixed(2);
                    var stakeTotal = parseFloat(stakeVal) - parseFloat("3.50");
                    randomMap.set(crdId, randomCount + 1);
                    $('#stake').text(stakeTotal.toFixed(2));
                }

                // reset data
                numBlockMap.set('crd' + crdId, []);
                stakeCount = 0;
                randomCount = 0;
                stakeMap.set(crdId, undefined);
                randomMap.set(crdId, undefined);
            }
        }

        function getRandomNumber() {
            var resultVal;
            $.ajax({
                type: "GET",
                contentType: "application/json",
                url: "https://www.random.org/integers/?num=1&min=1&max=56&col=1&base=10&format=plain&rnd=new",
                dataType: 'text',
                async: false,
                success: function (result) {
                    resultVal = result.trim();
                },
                error: function (jqXhr, textStatus, errorThrown) {
                    console.error("ERROR: ", errorThrown);
                }
            });

            return resultVal;
        }

        function compareArrays(arr1, arr2) {
            var result1 = arr1.map(function (x) {
                return parseInt(x, 10);
            });

            var result2 = arr2.map(function (x) {
                return parseInt(x, 10);
            });

            console.log("result1 : ", result1);
            console.log("result2 : ", result2);

            if (result1.length !== result2.length)
                return false;
            for (var i = result1.length; i--;) {
                if (!result2.includes(result1[i]))
                    return false;
            }
            return true;
        }

        function getHitsCount(arr1, arr2) {
            var hits = 0;
            var result1 = arr1.map(function (x) {
                return parseInt(x, 10);
            });

            var result2 = arr2.map(function (x) {
                return parseInt(x, 10);
            });

            for (var i = result1.length; i--;) {
                if (result2.includes(result1[i]))
                    hits++;
            }
            return hits;
        }

        function pad(num, size) {
            var s = num + "";
            while (s.length < size) s = "0" + s;
            return s;
        }

        function reloadPage() {
            window.location.reload();
        }

        function onDrawButtonClick() {
            $("body").addClass("loading");
            var randomArr = [];
            var drawsString = [];
            var randomNumber;

            // -- Get Random 6 Numbers --
            while (randomArr.length < 7) {
                randomNumber = getRandomNumber();
                if (randomArr.length === 6) {
                    break;
                } else if (randomArr.length === 0) {
                    if (randomNumber <= 9) {
                        randomArr.push('0' + randomNumber);
                    } else {
                        randomArr.push(randomNumber);
                    }
                } else {
                    if (!randomArr.includes(randomNumber)) {
                        if (randomNumber <= 9) {
                            randomArr.push('0' + randomNumber);
                        } else {
                            randomArr.push(randomNumber);
                        }
                    }
                }
            }

            drawsString.push("{ \"date\" : " + "\"" + new Date().toISOString() + "\"" +
                ", \"numberCombination\" : " + "\"" + randomArr.join("-") + "\"" +
                ", \"gameSerial\" : " + "\"" + '' + "\""
                + "}");
            var drawsData = "{ \"drawsList\" : " + "[" + drawsString.toString() + "]" + "}";

            // -- Save Data to Draws Table --
            var savedDrawId;
            $.ajax({
                async: false,
                type: "POST",
                contentType: "application/json",
                url: window.location.href + "/saveDraws",
                data: drawsData,
                dataType: 'text',
                success: function (result) {
                    var draw = JSON.parse(result);
                    savedDrawId = JSON.parse(result).id;
                    const drawPrefix = "XU000001N";
                    var drawDate = new Date().getFullYear().toString().substr(-3);
                    var drawSerial = drawPrefix + drawDate + pad(savedDrawId, 8);
                    draw.gameSerial = drawSerial;
                    draw.date = new Date(JSON.parse(result).date);
                    // -- Update Draws Table with Draw Serial --
                    $.ajax({
                        async: false,
                        type: "POST",
                        url: window.location.href + "/updateDraws",
                        data: draw,
                        dataType: 'text',
                        success: function (result) {
                            // -- Get Compare Data List From Number Block Table --
                            $.ajax({
                                type: "GET",
                                url: window.location.href + "/loadCompareList",
                                dataType: 'json',
                                async: false,
                                success: function (data) {
                                    for (var i = 0; i < data.length; i++) {
                                        var hitCount = getHitsCount((data[i].numberCombination.split("-")), randomArr);
                                        data[i].date = new Date(data[i].date);
                                        data[i].hits = hitCount;
                                        data[i].checked = 1;
                                        data[i].drawId = savedDrawId;

                                        // -- Update Number Block Table --
                                        $.ajax({
                                            async: false,
                                            type: "POST",
                                            url: window.location.href + "/updateNumberBlock",
                                            data: data[i],
                                            dataType: 'text',
                                            success: function (result) {
                                                console.debug("Success updateNumberBlock");
                                            },
                                            error: function (jqXhr, textStatus, errorThrown) {
                                                console.error("ERROR: ", errorThrown);
                                            }
                                        });
                                    }

                                    reloadPage();
                                    $("body").removeClass("loading");
                                },
                                error: function (jqXhr, textStatus, errorThrown) {
                                    console.error("ERROR: ", errorThrown);
                                }
                            });
                        },
                        error: function (jqXhr, textStatus, errorThrown) {
                            console.error("ERROR: ", errorThrown);
                        }
                    });
                },
                error: function (jqXhr, textStatus, errorThrown) {
                    console.error("ERROR: ", errorThrown);
                }
            });


        }

        $(window).on('load', function () {
            $('#currentDraw').append("Current Draw : <span class='numberCircle'>00</span>-<span class='numberCircle'>00</span>-<span class='numberCircle'>00</span>-<span class='numberCircle'>00</span>-<span class='numberCircle'>00</span>-<span class='numberCircle'>00</span>");
            for (var y = 1; y <= 10; y++) {
                $('#' + "randomBtn" + y).prop('disabled', true);
                $('#' + "deleteBtn" + y).prop('disabled', true);
                $('#' + "remainNumCount" + "crd" + y).hide();
            }
        });

        $(document).ready(function () {
            // SUBMIT FORM
            $("#numberBlockForm").submit(function (event) {
                // Prevent the form from submitting via the browser.
                event.preventDefault();
                ajaxPost();
            });

            function ajaxPost() {
                // PREPARE FORM DATA
                var formString = [];
                var drawsString = [];
                for (var y = 1; y <= 10; y++) {
                    var selectedData = [];

                    for (var i = 1; i <= 56; i++) {
                        if ($('#' + 'crd' + y).find('#' + (i <= 9 ? '0' + i : i)).text().trim() === "") {
                            $('#' + 'crd' + y).find('#' + (i <= 9 ? '0' + i : i)).html($('<span>' + (i <= 9 ? '0' + i : i) + '</span>'));
                            selectedData.push((i <= 9 ? '0' + i : i));
                        }
                    }

                    var selectionType = "";
                    if (randomDataMap.get('crd' + y) !== undefined && randomDataMap.get('crd' + y).length > 0 && compareArrays(randomDataMap.get('crd' + y), selectedData)) {
                        selectionType = "RANDOM";
                    } else {
                        selectionType = "DETERMINISTIC";
                    }

                    if (selectedData.length === 6) {
                        if (selectionType === "RANDOM") {
                            drawsString.push("{ \"date\" : " + "\"" + new Date().toISOString() + "\"" +
                                ", \"numberCombination\" : " + "\"" + selectedData.join("-") + "\"" + "}");
                        } else {
                            formString.push("{ \"date\" : " + "\"" + new Date().toISOString() + "\"" +
                                ", \"numberCombination\" : " + "\"" + selectedData.join("-") + "\"" +
                                ", \"pickType\" : " + "\"" + selectionType + "\"" +
                                ", \"cost\" : " + "\"" + STAKEAMT + "\"" +
                                ", \"hits\" : " + "\"" + 0 + "\"" +
                                ", \"checked\" : " + "\"" + 0 + "\"" + "}");
                        }
                    }
                }

                // console.log("formString : ", formString);
                // console.log("drawsString : ", drawsString);
                if (drawsString.length > 0) {
                    var drawsData = "{ \"drawsList\" : " + "[" + drawsString.toString() + "]" + "}";
                    // DO POST Draws Table
                    $.ajax({
                        type: "POST",
                        contentType: "application/json",
                        url: window.location.href + "/saveDraws",
                        data: drawsData,
                        dataType: 'text',
                        success: function (result) {
                            console.debug(result);
                            randomCount = 0;
                            stakeCount = 0;
                            selectedArr = [];
                            numBlockMap = new Map();
                            randomMap = new Map();
                            randomDataMap = new Map();
                            stakeMap = new Map();
                            $('#stake').text(stakeDefault.toFixed(2));
                            $(".myCheck").prop("checked", false);
                            location.reload();
                        },
                        error: function (jqXhr, textStatus, errorThrown) {
                            console.error("ERROR: ", errorThrown);
                        }
                    });
                } else if (formString.length > 0) {
                    var formData = "{ \"numberBlockList\" : " + "[" + formString.toString() + "]" + "}";
                    // DO POST Number Block Table
                    $.ajax({
                        type: "POST",
                        contentType: "application/json",
                        url: window.location.href + "/saveNumberBlock",
                        data: formData,
                        dataType: 'text',
                        success: function (result) {
                            console.debug(result);
                            randomCount = 0;
                            stakeCount = 0;
                            selectedArr = [];
                            numBlockMap = new Map();
                            randomMap = new Map();
                            randomDataMap = new Map();
                            stakeMap = new Map();
                            $('#stake').text(stakeDefault.toFixed(2));
                            $(".myCheck").prop("checked", false);
                            location.reload();
                        },
                        error: function (jqXhr, textStatus, errorThrown) {
                            console.error("ERROR: ", errorThrown);
                        }
                    });
                }
            }

            $("#drawButton").click(function () {
                onDrawButtonClick();
            });
        });

    </script>
</head>
<body>

<div class="pricing-header px-1 py-1 pt-md-2 pb-md-1 mx-auto text-center">
    <h1>Bit Coin Lottery</h1>
</div>

<div class="pricing-header px-1 py-1 pt-md-2 pb-md-1 mx-auto text-center">
    <h3 class="font-weight-bold text-danger font-italic">Last Winner : <span
            th:text="${winningNumber}"></span><span>&nbsp</span></h3>
</div>

<div class="container-fluid text-center">
    <form id="numberBlockForm">
        <!--                <div class=" d-flex flex-wrap">-->
        <div class="row">
            <th:block th:each="cardId : ${outerCards}">
                <div class="card mb-1 mr-1 box-shadow media-size"
                     th:id="'crd' + ${cardId}">
                    <div class="card-body">
                        <div class="form-check form-check-inline">
                            <h6 class="my-0 font-weight-normal">Play <span
                                    th:text="${cardId}"></span><span>&nbsp;</span></h6>
                            <input class="form-check-input myCheck" name="selectType"
                                   th:attr="onclick=|deterministicClickFunction(${cardId}, 'fieldset' + '${cardId}', this)|"
                                   th:id="'deterministic' + ${cardId}"
                                   title="Deterministic Select"
                                   type="checkbox" value="DETERMINISTIC">
                            <label class="form-check-label" for="deterministic">
                                <i aria-hidden="true" class="fa fa-check"></i>
                            </label>
                        </div>
                        <button class="btn btn-primary btn-sm"
                                th:attr="onclick=|randomClickFunction(${cardId},'fieldset' + '${cardId}', this)|"
                                th:id="'randomBtn' + ${cardId}" title="Random Select"
                                type="button" value="RANDOM">
                            <i aria-hidden="true" class="fa fa-random"></i>
                        </button>
                        <button class="btn btn-danger btn-sm"
                                th:attr="onclick=|deleteClickFunction(${cardId}, 'fieldset' + '${cardId}')|"
                                th:id="'deleteBtn' + ${cardId}"
                                title="Remove Select"
                                type="button">
                            <i aria-hidden="true" class="fa fa-trash-o"></i>
                        </button>
                        <div th:id="'remainNumCount' + 'crd' + ${cardId}"><span class="text-primary font-italic">Remaining 6/6 Numbers</span>
                        </div>
                        <hr>
                        <fieldset disabled th:id="'fieldset' + ${cardId}">
                            <div class="container-fluid" th:id="'numContainer' + ${cardId}">
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}" th:if="${number} <= 7">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 7 and ${number} <= 14">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 14 and ${number} <= 21">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 21 and ${number} <= 28">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 28 and ${number} <= 35">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 35 and ${number} <= 42">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 42 and ${number} <= 49">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="btn-group">
                                        <th:block th:each="number : ${padNumbers}"
                                                  th:if="${number} > 49 and ${number} <= 56">
                                            <button class="btn btn-outline-danger btn-sm"
                                                    th:attr="onclick=|clickFunction('crd' + '${cardId}','${number}', this)|"
                                                    th:id="${number}"
                                                    type="button">
                                                <span th:text="${number}"></span>
                                            </button>
                                        </th:block>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </th:block>
        </div>
        <!--                </div>-->
        <footer class="pt-0 my-md-0 pt-md-0 border-top">
            <div class="row mt-3">
                <div class="col-10 col-md">
                    <h3>STAKE : $<span id="stake" th:field="*{cost}">0.00</span></h3>
                </div>
                <div class="col-2 col-md">
                    <button class="btn btn-primary btn-lg rounded-pill float-right" id="playButton"
                            type="submit">
                        <i aria-hidden="true" class="fa fa-play"></i>
                        Play!
                    </button>
                    <button class="btn btn-success btn-lg rounded-pill float-right" id="drawButton"

                            type="submit">
                        <i aria-hidden="true" class="fa fa-play"></i>
                        Draw!
                    </button>
                </div>
            </div>
        </footer>

        <hr>

        <div class="pricing-header px-1 py-1 pt-md-2 pb-md-1 mx-auto text-center">
            <h3 class="font-weight-bold text-primary font-italic" id="currentDraw"></h3>
        </div>

        <hr>

    </form>
    <!--    <button class="btn btn-primary btn-sm float-right" th:onclick="|window.location.href='/loadData'|" type="button">-->
    <!--        <i aria-hidden="true" class="fa fa-tasks"></i>-->
    <!--        Load Data-->
    <!--    </button>-->

    <!-- Load Data Table -->
    <div class="table-responsive">
        <table class="table table-sm table-hover table-striped table-bordered">
            <thead>
            <tr>
                <th scope="col-auto">#</th>
                <th scope="col-auto">Date</th>
                <th scope="col-auto">Number Combination</th>
                <th scope="col-auto">Pick Type</th>
                <th scope="col-auto">Cost</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="numBlock : ${numberBlocks}">
                <tr>
                    <td><span th:text="${numBlock.id}"></span></td>
                    <td><span th:text="${numBlock.date}"></span></td>
                    <td><span th:text="${numBlock.numberCombination}"></span></td>
                    <td><span th:text="${numBlock.pickType}"></span></td>
                    <td><span th:text="${numBlock.cost}"></span></td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>

    <!-- Load Data Table Number Block Draws-->
    <div class="table-responsive">
        <table class="table table-sm table-hover table-striped table-bordered">
            <thead>
            <tr>
                <th scope="col-auto">ID</th>
                <th scope="col-auto">Date</th>
                <th scope="col-auto">Game</th>
                <th scope="col-auto">Picked</th>
                <th scope="col-auto">Winner</th>
                <th scope="col-auto">Hits</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="numBlockDraw : ${numberBlockDraws}">
                <tr>
                    <td><span th:text="${numBlockDraw.id}"></span></td>
                    <td><span th:text="${numBlockDraw.date}"></span></td>
                    <td><span th:text="${numBlockDraw.game}"></span></td>
                    <td><span th:text="${numBlockDraw.picked}"></span></td>
                    <td><span th:text="${numBlockDraw.winner}"></span></td>
                    <td><span th:text="${numBlockDraw.hits}"></span></td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>

    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="dialogTitle" class="modal fade" id="limitDialog" role="dialog"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dialogTitle">Warning!</h5>
                </div>
                <div class="modal-body">
                    <p><strong>Limit Exceeded! Max Limit is 6 numbers.</strong></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" class="modal loadModal"><!-- Place at bottom of page --></div>
</div>
</body>
</html>
